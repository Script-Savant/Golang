{{define "title"}}{{.post.Title}} - Blog App{{end}}

{{define "content"}}
<article>
    <h1>{{.post.Title}}</h1>
    <p class="text-muted text-capitalize">
        By {{.post.Author.Username}} on {{formatDate .post.CreatedAt}}
        {{if .post.UpdatedAt.After .post.CreatedAt}}
            (Updated {{formatDate .post.UpdatedAt}})
        {{end}}
    </p>
    
    {{if .post.ImagePath}}
    <div class="mb-4">
        <img src="{{.post.ImagePath}}" alt="{{.post.Title}}" class="img-fluid rounded">
    </div>
    {{end}}
    
    <div class="">
        {{.post.Content}}
    </div>
    
    {{if .user}}
    <div class="mt-4">
        <a href="/posts/edit/{{.post.ID}}" class="btn btn-warning">Edit</a>
        <form action="/posts/delete/{{.post.ID}}" method="POST" class="d-inline">
            <button type="submit" class="btn btn-danger" 
                    onclick="return confirm('Are you sure you want to delete this post?')">
                Delete
            </button>
        </form>
    </div>
    {{end}}
</article>
{{end}}